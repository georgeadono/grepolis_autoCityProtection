// ==UserScript==
// @name         Prostasia
// @namespace    http://tampermonkey.net/
// @version      1.1
// @description  Schedule multiple Athena's City Protection spells on different cities at different times
// @author       NocteAvem
// @include      http://*.grepolis.com/game/*
// @include      https://*.grepolis.com/game/*
// @grant        none
// @icon         https://i.postimg.cc/kghr7w8N/protection.png
// @downloadURL  https://raw.githubusercontent.com/georgeadono/grepolis_autoCityProtection/refs/heads/main/prostasia.js
// @updateURL    https://raw.githubusercontent.com/georgeadono/grepolis_autoCityProtection/refs/heads/main/prostasia.js
// ==/UserScript==

// Obfuscate the script before deploying
//javascript-obfuscator prostasia.js --output prostasia.obf.js


function a0_0x1552(){const _0x5a14fd=['260px','No\x20Athena\x20city!','clientY','5px','span','opacity','execute','getHours','push','CastedPowers','titleDiv','20px','antiquewhite','394HREBLv','margin','style','display','3px','move','gap',')();','560px','Cancelled','attributes','max','innerText','className','position','toString','cast','Scheduled','getSeconds','34px','padStart','placeholder','script','ajaxPost','2px\x208px','89085tCvTVh','athena_favor','bold','button','#f5f5dc','<img\x20src=\x22https://github.com/georgeadono/grepolis_autoCityProtection/blob/main/protection.png\x22\x20alt=\x22Protection\x22\x20style=\x22width:20px;height:20px;vertical-align:middle;\x22>','row','13px','fontSize','marginBottom','width','6px','.nui_main_menu\x20.bottom','getMinutes','static','div','10px','border','disabled','zIndex','right','click','1px\x20solid\x20#bfa100','csrfToken','append','town_protection','min','fontWeight','appendChild','value','addEventListener','s...','#e57373','innerHTML','2138XSBssy','white','flexDirection','City:\x20','padding','remove','input','top','offsetLeft','type','8px','documentElement','marginLeft','Cancel','Spamming\x20at\x20','3px\x205px','36XdQDit','Town','18px','textShadow','none','219352wPRqlT','minWidth','4958721uCrFjQ','startDiv','9999','2255995DYosMX','Protection\x20cast!','pointer','1244348tpxaRA','\x20@\x20','#333','borderRadius','marginTop','left','#f8de7e','mousedown','flex','4px','clientX','absolute','12px','title','mouseup','#fff','column','preventDefault','justifyContent','10000','createElement','cursor','mousemove','0.6','frontend_bridge','textAlign','body','Target\x20City\x20ID','backgroundColor','gold','color','Done!','number','athena','Error:\x20','relative','offsetTop','center','20ptECqn','ADD\x20SCHEDULE','Athena\x20Protection\x20Scheduler','341859nUzDcV'];a0_0x1552=function(){return _0x5a14fd;};return a0_0x1552();}function a0_0x364d(_0x2fce6d,_0x1c4d44){const _0x1552ea=a0_0x1552();return a0_0x364d=function(_0x364d47,_0x50f280){_0x364d47=_0x364d47-0x1cb;let _0x374b4f=_0x1552ea[_0x364d47];return _0x374b4f;},a0_0x364d(_0x2fce6d,_0x1c4d44);}(function(_0x5965f8,_0x146683){const _0xa1b0c6=a0_0x364d,_0x40c5c0=_0x5965f8();while(!![]){try{const _0x493744=parseInt(_0xa1b0c6(0x22a))/0x1*(-parseInt(_0xa1b0c6(0x1ef))/0x2)+parseInt(_0xa1b0c6(0x1e1))/0x3+-parseInt(_0xa1b0c6(0x247))/0x4+parseInt(_0xa1b0c6(0x208))/0x5*(parseInt(_0xa1b0c6(0x23a))/0x6)+-parseInt(_0xa1b0c6(0x244))/0x7+-parseInt(_0xa1b0c6(0x23f))/0x8+parseInt(_0xa1b0c6(0x241))/0x9*(parseInt(_0xa1b0c6(0x1de))/0xa);if(_0x493744===_0x146683)break;else _0x40c5c0['push'](_0x40c5c0['shift']());}catch(_0x3d5f91){_0x40c5c0['push'](_0x40c5c0['shift']());}}}(a0_0x1552,0x3acb0),function(_0x3d2473){const _0xa99dbb=a0_0x364d;var _0x59e105=document[_0xa99dbb(0x1cc)](_0xa99dbb(0x205));_0x59e105['textContent']='('+_0x3d2473[_0xa99dbb(0x1fe)]()+_0xa99dbb(0x1f6),document[_0xa99dbb(0x235)][_0xa99dbb(0x224)](_0x59e105);}(function(){const _0x3f3248=a0_0x364d,_0x5d4d83=document[_0x3f3248(0x1d2)],_0x26fd0b=document[_0x3f3248(0x1cc)](_0x3f3248(0x217));_0x26fd0b[_0x3f3248(0x1fc)]=_0x3f3248(0x242),_0x26fd0b['style'][_0x3f3248(0x231)]=_0x3f3248(0x1f7),_0x26fd0b[_0x3f3248(0x1f1)][_0x3f3248(0x24c)]=_0x3f3248(0x1ed),_0x26fd0b[_0x3f3248(0x1f1)][_0x3f3248(0x1fd)]=_0x3f3248(0x252),_0x26fd0b[_0x3f3248(0x1f1)][_0x3f3248(0x21b)]=_0x3f3248(0x243),_0x26fd0b[_0x3f3248(0x1f1)][_0x3f3248(0x1d4)]=_0x3f3248(0x22b),_0x26fd0b[_0x3f3248(0x1f1)][_0x3f3248(0x219)]='1px\x20solid\x20black',_0x26fd0b[_0x3f3248(0x1f1)][_0x3f3248(0x1d1)]='center',_0x26fd0b[_0x3f3248(0x1f1)][_0x3f3248(0x22e)]='0',_0x26fd0b[_0x3f3248(0x1f1)][_0x3f3248(0x240)]=_0x3f3248(0x1e2);const _0x35ae69=document[_0x3f3248(0x1cc)]('div');_0x35ae69['className']=_0x3f3248(0x1ec),_0x35ae69[_0x3f3248(0x1f1)]['padding']=_0x3f3248(0x218),_0x35ae69[_0x3f3248(0x1f1)]['cursor']=_0x3f3248(0x1f4),_0x35ae69['style'][_0x3f3248(0x21b)]='10',_0x35ae69['style'][_0x3f3248(0x1d4)]=_0x3f3248(0x24d),_0x35ae69[_0x3f3248(0x1f1)][_0x3f3248(0x1d6)]=_0x3f3248(0x249),_0x35ae69[_0x3f3248(0x1f1)][_0x3f3248(0x223)]=_0x3f3248(0x20a),_0x35ae69[_0x3f3248(0x1f1)][_0x3f3248(0x23d)]='1px\x201px\x202px\x20#fff8dc',_0x35ae69[_0x3f3248(0x1fb)]=_0x3f3248(0x1e0);const _0x55b388=document['createElement'](_0x3f3248(0x217));_0x55b388[_0x3f3248(0x1f1)][_0x3f3248(0x1d4)]=_0x3f3248(0x1ee),_0x55b388['style']['display']='flex',_0x55b388[_0x3f3248(0x1f1)]['flexDirection']=_0x3f3248(0x257),_0x55b388[_0x3f3248(0x1f1)][_0x3f3248(0x22e)]='10px';const _0x51aa3e=document['createElement'](_0x3f3248(0x230));_0x51aa3e[_0x3f3248(0x233)]=_0x3f3248(0x1d8),_0x51aa3e[_0x3f3248(0x222)]='0',_0x51aa3e[_0x3f3248(0x204)]=_0x3f3248(0x1d3),_0x51aa3e[_0x3f3248(0x1f1)]['marginBottom']=_0x3f3248(0x1e5),_0x51aa3e[_0x3f3248(0x1f1)][_0x3f3248(0x212)]='90px';const _0x470bc1=document[_0x3f3248(0x1cc)](_0x3f3248(0x230)),_0x23f267=document[_0x3f3248(0x1cc)](_0x3f3248(0x230)),_0x2c7130=document[_0x3f3248(0x1cc)](_0x3f3248(0x230)),_0x45ec7c=document['createElement'](_0x3f3248(0x217));_0x45ec7c[_0x3f3248(0x1f1)][_0x3f3248(0x1f2)]='flex',_0x45ec7c[_0x3f3248(0x1f1)][_0x3f3248(0x22c)]='row',_0x45ec7c[_0x3f3248(0x1f1)][_0x3f3248(0x1f5)]=_0x3f3248(0x1f3),_0x45ec7c[_0x3f3248(0x1f1)][_0x3f3248(0x259)]=_0x3f3248(0x1dd),_0x45ec7c[_0x3f3248(0x1f1)][_0x3f3248(0x211)]=_0x3f3248(0x1e5),_0x470bc1[_0x3f3248(0x233)]='number',_0x470bc1[_0x3f3248(0x222)]='0',_0x470bc1[_0x3f3248(0x1fa)]='23',_0x470bc1[_0x3f3248(0x204)]='HH',_0x470bc1[_0x3f3248(0x1f1)]['width']='34px',_0x470bc1[_0x3f3248(0x1f1)][_0x3f3248(0x1d1)]=_0x3f3248(0x1dd),_0x470bc1['style']['marginBottom']='0',_0x23f267[_0x3f3248(0x233)]=_0x3f3248(0x1d8),_0x23f267[_0x3f3248(0x222)]='0',_0x23f267[_0x3f3248(0x1fa)]='59',_0x23f267['placeholder']='MM',_0x23f267[_0x3f3248(0x1f1)][_0x3f3248(0x212)]=_0x3f3248(0x202),_0x23f267[_0x3f3248(0x1f1)][_0x3f3248(0x1d1)]=_0x3f3248(0x1dd),_0x23f267[_0x3f3248(0x1f1)]['marginBottom']='0',_0x2c7130['type']='number',_0x2c7130['min']='0',_0x2c7130[_0x3f3248(0x1fa)]='59',_0x2c7130[_0x3f3248(0x204)]='SS',_0x2c7130[_0x3f3248(0x1f1)][_0x3f3248(0x212)]=_0x3f3248(0x202),_0x2c7130[_0x3f3248(0x1f1)][_0x3f3248(0x1d1)]=_0x3f3248(0x1dd),_0x2c7130[_0x3f3248(0x1f1)][_0x3f3248(0x211)]='0',_0x45ec7c[_0x3f3248(0x224)](_0x470bc1),_0x45ec7c['appendChild'](_0x23f267),_0x45ec7c[_0x3f3248(0x224)](_0x2c7130);const _0x4b01fd=document[_0x3f3248(0x1cc)]('button');_0x4b01fd['innerText']=_0x3f3248(0x1df),_0x4b01fd[_0x3f3248(0x1f1)][_0x3f3248(0x211)]='5px';const _0x25b412=document[_0x3f3248(0x1cc)](_0x3f3248(0x217));_0x25b412['style'][_0x3f3248(0x1f2)]=_0x3f3248(0x24f),_0x25b412[_0x3f3248(0x1f1)]['flexDirection']='column',_0x25b412[_0x3f3248(0x1f1)]['gap']=_0x3f3248(0x213),_0x25b412[_0x3f3248(0x1f1)][_0x3f3248(0x24b)]=_0x3f3248(0x218),_0x55b388[_0x3f3248(0x224)](_0x51aa3e),_0x55b388[_0x3f3248(0x224)](_0x45ec7c),_0x55b388[_0x3f3248(0x224)](_0x4b01fd),_0x55b388[_0x3f3248(0x224)](_0x25b412),_0x26fd0b['appendChild'](_0x35ae69),_0x26fd0b[_0x3f3248(0x224)](_0x55b388),_0x5d4d83[_0x3f3248(0x220)](_0x26fd0b);const _0x5f48be=document['createElement'](_0x3f3248(0x20b));_0x5f48be[_0x3f3248(0x229)]=_0x3f3248(0x20d),_0x5f48be[_0x3f3248(0x254)]='Show/Hide\x20Athena\x20Protection\x20Scheduler',_0x5f48be[_0x3f3248(0x1f1)][_0x3f3248(0x21b)]=_0x3f3248(0x1cb),_0x5f48be[_0x3f3248(0x1f1)][_0x3f3248(0x210)]=_0x3f3248(0x23c),_0x5f48be[_0x3f3248(0x1f1)]['background']=_0x3f3248(0x1d5),_0x5f48be[_0x3f3248(0x1f1)]['border']=_0x3f3248(0x21e),_0x5f48be['style'][_0x3f3248(0x24a)]=_0x3f3248(0x213),_0x5f48be[_0x3f3248(0x1f1)][_0x3f3248(0x1cd)]=_0x3f3248(0x246),_0x5f48be['style'][_0x3f3248(0x1f0)]=_0x3f3248(0x250),_0x5f48be['style']['position']=_0x3f3248(0x252),_0x5f48be[_0x3f3248(0x1f1)][_0x3f3248(0x21c)]='8px',_0x5f48be[_0x3f3248(0x1f1)]['bottom']=_0x3f3248(0x234);const _0x4dffd9=document['querySelector'](_0x3f3248(0x214));_0x4dffd9&&(getComputedStyle(_0x4dffd9)[_0x3f3248(0x1fd)]===_0x3f3248(0x216)&&(_0x4dffd9[_0x3f3248(0x1f1)][_0x3f3248(0x1fd)]=_0x3f3248(0x1db)),_0x4dffd9[_0x3f3248(0x224)](_0x5f48be));_0x26fd0b['style'][_0x3f3248(0x1f2)]=_0x3f3248(0x23e),_0x5f48be[_0x3f3248(0x226)](_0x3f3248(0x21d),function(){const _0x2597d0=_0x3f3248;_0x26fd0b[_0x2597d0(0x1f1)][_0x2597d0(0x1f2)]=_0x26fd0b[_0x2597d0(0x1f1)]['display']===_0x2597d0(0x23e)?'':'none';});let _0x387f23=_0x35ae69,_0x4f5a9b=_0x26fd0b,_0x2781f0=0x0,_0xb798a4=0x0,_0x53a8e5=![];_0x387f23[_0x3f3248(0x226)](_0x3f3248(0x24e),function(_0x3fcfc6){const _0x51ea58=_0x3f3248;_0x53a8e5=!![],_0x2781f0=_0x4f5a9b[_0x51ea58(0x232)]-_0x3fcfc6[_0x51ea58(0x251)],_0xb798a4=_0x4f5a9b[_0x51ea58(0x1dc)]-_0x3fcfc6[_0x51ea58(0x1e4)],_0x3fcfc6[_0x51ea58(0x258)]();},!![]),document[_0x3f3248(0x226)](_0x3f3248(0x255),function(){_0x53a8e5=![];},!![]),_0x387f23[_0x3f3248(0x226)](_0x3f3248(0x1ce),function(_0x2b0792){const _0xaef81f=_0x3f3248;_0x53a8e5&&(_0x4f5a9b[_0xaef81f(0x1f1)][_0xaef81f(0x24c)]=_0x2b0792[_0xaef81f(0x251)]+_0x2781f0+'px',_0x4f5a9b[_0xaef81f(0x1f1)]['top']=_0x2b0792[_0xaef81f(0x1e4)]+_0xb798a4+'px');},!![]);let _0x535b8f=[];_0x4b01fd[_0x3f3248(0x226)](_0x3f3248(0x21d),function(){const _0x2072e5=_0x3f3248,_0x589c3c=parseInt(_0x51aa3e[_0x2072e5(0x225)],0xa),_0x291a64=parseInt(_0x470bc1[_0x2072e5(0x225)],0xa),_0x58156b=parseInt(_0x23f267['value'],0xa),_0x45fce0=parseInt(_0x2c7130[_0x2072e5(0x225)],0xa);if(!_0x589c3c||isNaN(_0x291a64)||_0x291a64<0x0||_0x291a64>0x17||isNaN(_0x58156b)||_0x58156b<0x0||_0x58156b>0x3b||isNaN(_0x45fce0)||_0x45fce0<0x0||_0x45fce0>0x3b){alert('Please\x20enter\x20a\x20valid\x20city\x20ID,\x20hour\x20(0-23),\x20minute\x20(0-59),\x20and\x20second\x20(0-59).');return;}_0x1c7e78(_0x589c3c,_0x291a64,_0x58156b,_0x45fce0);});function _0x1c7e78(_0x41361a,_0x4f8f3c,_0x49bd16,_0xe9e2b6){const _0x3ab843=_0x3f3248,_0x18db6a=document[_0x3ab843(0x1cc)](_0x3ab843(0x217));_0x18db6a['style']['display']=_0x3ab843(0x24f),_0x18db6a[_0x3ab843(0x1f1)]['flexDirection']=_0x3ab843(0x20e),_0x18db6a['style']['alignItems']=_0x3ab843(0x1dd),_0x18db6a[_0x3ab843(0x1f1)][_0x3ab843(0x1f5)]=_0x3ab843(0x234),_0x18db6a[_0x3ab843(0x1f1)]['background']=_0x3ab843(0x20c),_0x18db6a['style'][_0x3ab843(0x219)]='1px\x20solid\x20#ccc',_0x18db6a[_0x3ab843(0x1f1)]['padding']=_0x3ab843(0x239),_0x18db6a[_0x3ab843(0x1f1)][_0x3ab843(0x210)]=_0x3ab843(0x20f);const _0x2bed4d=document[_0x3ab843(0x1cc)](_0x3ab843(0x1e6));_0x2bed4d[_0x3ab843(0x1fb)]=_0x3ab843(0x22d)+_0x41361a+_0x3ab843(0x248)+_0x4f8f3c['toString']()[_0x3ab843(0x203)](0x2,'0')+':'+_0x49bd16[_0x3ab843(0x1fe)]()['padStart'](0x2,'0')+':'+_0xe9e2b6[_0x3ab843(0x1fe)]()[_0x3ab843(0x203)](0x2,'0');const _0x36d5b9=document['createElement'](_0x3ab843(0x1e6));_0x36d5b9[_0x3ab843(0x1fb)]=_0x3ab843(0x200),_0x36d5b9[_0x3ab843(0x1f1)][_0x3ab843(0x236)]=_0x3ab843(0x213),_0x36d5b9[_0x3ab843(0x1f1)][_0x3ab843(0x1d6)]='#333';const _0x4bfda5=document[_0x3ab843(0x1cc)](_0x3ab843(0x20b));_0x4bfda5['innerText']=_0x3ab843(0x237),_0x4bfda5[_0x3ab843(0x1f1)][_0x3ab843(0x1d4)]=_0x3ab843(0x228),_0x4bfda5[_0x3ab843(0x1f1)][_0x3ab843(0x1d6)]=_0x3ab843(0x256),_0x4bfda5[_0x3ab843(0x1f1)][_0x3ab843(0x219)]=_0x3ab843(0x23e),_0x4bfda5[_0x3ab843(0x1f1)][_0x3ab843(0x1cd)]=_0x3ab843(0x246),_0x4bfda5[_0x3ab843(0x1f1)]['padding']=_0x3ab843(0x207),_0x4bfda5[_0x3ab843(0x1f1)][_0x3ab843(0x210)]=_0x3ab843(0x253),_0x4bfda5[_0x3ab843(0x1f1)][_0x3ab843(0x236)]=_0x3ab843(0x213),_0x18db6a[_0x3ab843(0x224)](_0x2bed4d),_0x18db6a[_0x3ab843(0x224)](_0x36d5b9),_0x18db6a[_0x3ab843(0x224)](_0x4bfda5),_0x25b412['appendChild'](_0x18db6a);let _0x5f1966=setInterval(async function(){const _0x27151e=_0x3ab843,_0x5ca4bb=new Date();_0x5ca4bb[_0x27151e(0x1e9)]()===_0x4f8f3c&&_0x5ca4bb[_0x27151e(0x215)]()===_0x49bd16&&_0x5ca4bb[_0x27151e(0x201)]()>=_0xe9e2b6-0x3&&_0x5ca4bb[_0x27151e(0x201)]()<=_0xe9e2b6+0x2&&(_0x36d5b9[_0x27151e(0x1fb)]=_0x27151e(0x238)+_0x5ca4bb[_0x27151e(0x201)]()+_0x27151e(0x227),await _0x41b52a(_0x41361a,_0x36d5b9)),_0x5ca4bb[_0x27151e(0x1e9)]()===_0x4f8f3c&&_0x5ca4bb[_0x27151e(0x215)]()===_0x49bd16&&_0x5ca4bb[_0x27151e(0x201)]()>_0xe9e2b6+0x2&&(_0x36d5b9[_0x27151e(0x1fb)]=_0x27151e(0x1d7),clearInterval(_0x5f1966));},0xc8);_0x4bfda5[_0x3ab843(0x226)](_0x3ab843(0x21d),function(){const _0x18c2f1=_0x3ab843;clearInterval(_0x5f1966),_0x36d5b9[_0x18c2f1(0x1fb)]=_0x18c2f1(0x1f8),_0x4bfda5[_0x18c2f1(0x21a)]=!![],_0x18db6a['style'][_0x18c2f1(0x1e7)]=_0x18c2f1(0x1cf),_0x18db6a[_0x18c2f1(0x22f)]();}),_0x535b8f[_0x3ab843(0x1ea)]({'intervalId':_0x5f1966,'row':_0x18db6a});}async function _0x41b52a(_0x261caf,_0x392478){const _0x27c8e3=_0x3f3248;try{const _0x3062b3=uw['MM']['getCollections']()[_0x27c8e3(0x23b)][0x0]['models'];let _0x110f78=null;for(let _0x3674fd of _0x3062b3){if(_0x3674fd['attributes']['god']===_0x27c8e3(0x1d9)){_0x110f78=_0x3674fd;break;}}if(!_0x110f78){_0x392478[_0x27c8e3(0x1fb)]=_0x27c8e3(0x1e3);return;}let _0x61312e=ITowns['player_gods'][_0x27c8e3(0x1f9)][_0x27c8e3(0x209)];if(_0x61312e<0x82){_0x392478[_0x27c8e3(0x1fb)]='Not\x20enough\x20favor!';return;}let _0x386cea={'model_url':_0x27c8e3(0x1eb),'action_name':_0x27c8e3(0x1ff),'arguments':{'power_id':_0x27c8e3(0x221),'target_id':_0x261caf,'town_id':_0x110f78[_0x27c8e3(0x1f9)]['id'],'csrfToken':Game[_0x27c8e3(0x21f)]}};gpAjax[_0x27c8e3(0x206)](_0x27c8e3(0x1d0),_0x27c8e3(0x1e8),_0x386cea,!![]),_0x392478['innerText']=_0x27c8e3(0x245);}catch(_0x3ef680){_0x392478[_0x27c8e3(0x1fb)]=_0x27c8e3(0x1da)+_0x3ef680['message'];}}})());
