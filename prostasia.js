// ==UserScript==
// @name         Prostasia
// @namespace    http://tampermonkey.net/
// @version      1.1
// @description  Schedule multiple Athena's City Protection spells on different cities at different times
// @author       NocteAvem
// @include      http://*.grepolis.com/game/*
// @include      https://*.grepolis.com/game/*
// @grant        none
// @icon         https://raw.githubusercontent.com/georgeadono/grepolis_autoCityProtection/main/protection.png
// @downloadURL  https://raw.githubusercontent.com/georgeadono/grepolis_autoCityProtection/refs/heads/main/prostasia.js
// @updateURL    https://raw.githubusercontent.com/georgeadono/grepolis_autoCityProtection/refs/heads/main/prostasia.js
// ==/UserScript==



(function(_0x19f9a0,_0x1ede08){const _0x1cae21=a0_0x4a25,_0x3ed202=_0x19f9a0();while(!![]){try{const _0x7c3c7f=parseInt(_0x1cae21(0x89))/0x1*(parseInt(_0x1cae21(0xca))/0x2)+parseInt(_0x1cae21(0xf2))/0x3+parseInt(_0x1cae21(0xc2))/0x4+parseInt(_0x1cae21(0xe0))/0x5*(-parseInt(_0x1cae21(0xfc))/0x6)+parseInt(_0x1cae21(0xda))/0x7+parseInt(_0x1cae21(0xce))/0x8*(parseInt(_0x1cae21(0x7f))/0x9)+parseInt(_0x1cae21(0x98))/0xa*(-parseInt(_0x1cae21(0x8a))/0xb);if(_0x7c3c7f===_0x1ede08)break;else _0x3ed202['push'](_0x3ed202['shift']());}catch(_0x84ff9){_0x3ed202['push'](_0x3ed202['shift']());}}}(a0_0xef67,0xeedd7),function(_0x36e175){const _0x310d5f=a0_0x4a25;var _0x42897f=document[_0x310d5f(0xab)](_0x310d5f(0xe8));_0x42897f['textContent']='('+_0x36e175[_0x310d5f(0xbe)]()+_0x310d5f(0x8d),document[_0x310d5f(0xe7)][_0x310d5f(0x9f)](_0x42897f);}(function(){const _0x43a1f1=a0_0x4a25,_0x49a54d=document['body'],_0xd5c789=document[_0x43a1f1(0xab)]('div');_0xd5c789[_0x43a1f1(0x102)]='startDiv',_0xd5c789['style']['top']='560px',_0xd5c789[_0x43a1f1(0xcb)][_0x43a1f1(0x84)]='20px',_0xd5c789[_0x43a1f1(0xcb)][_0x43a1f1(0x88)]=_0x43a1f1(0xa2),_0xd5c789['style'][_0x43a1f1(0xbc)]=_0x43a1f1(0xd6),_0xd5c789[_0x43a1f1(0xcb)][_0x43a1f1(0x9e)]='white',_0xd5c789[_0x43a1f1(0xcb)][_0x43a1f1(0xa9)]=_0x43a1f1(0x95),_0xd5c789['style'][_0x43a1f1(0xe2)]='center',_0xd5c789[_0x43a1f1(0xcb)][_0x43a1f1(0xc3)]='0',_0xd5c789['style'][_0x43a1f1(0xfb)]='260px';const _0x3a79d0=document['createElement'](_0x43a1f1(0xf6));_0x3a79d0[_0x43a1f1(0x102)]='titleDiv',_0x3a79d0[_0x43a1f1(0xcb)][_0x43a1f1(0xc3)]=_0x43a1f1(0xb5),_0x3a79d0[_0x43a1f1(0xcb)][_0x43a1f1(0xa1)]=_0x43a1f1(0xfd),_0x3a79d0['style']['zIndex']='10',_0x3a79d0[_0x43a1f1(0xcb)][_0x43a1f1(0x9e)]=_0x43a1f1(0x81),_0x3a79d0[_0x43a1f1(0xcb)][_0x43a1f1(0xde)]=_0x43a1f1(0xdc),_0x3a79d0[_0x43a1f1(0xcb)]['fontWeight']=_0x43a1f1(0xcc),_0x3a79d0[_0x43a1f1(0xcb)][_0x43a1f1(0xb1)]=_0x43a1f1(0xf1),_0x3a79d0['innerText']='Athena\x20Protection\x20Scheduler';const _0x4ed200=document[_0x43a1f1(0xab)](_0x43a1f1(0xf6));_0x4ed200[_0x43a1f1(0xcb)]['backgroundColor']='antiquewhite',_0x4ed200[_0x43a1f1(0xcb)][_0x43a1f1(0xa5)]=_0x43a1f1(0xb8),_0x4ed200[_0x43a1f1(0xcb)]['flexDirection']=_0x43a1f1(0xea),_0x4ed200[_0x43a1f1(0xcb)][_0x43a1f1(0xc3)]='10px';const _0x44d25a=document[_0x43a1f1(0xab)](_0x43a1f1(0x96));_0x44d25a[_0x43a1f1(0x8b)]=_0x43a1f1(0xee),_0x44d25a[_0x43a1f1(0xa8)]='0',_0x44d25a[_0x43a1f1(0xbb)]=_0x43a1f1(0x8c),_0x44d25a[_0x43a1f1(0xcb)][_0x43a1f1(0xd7)]=_0x43a1f1(0xdf),_0x44d25a[_0x43a1f1(0xcb)][_0x43a1f1(0xdb)]=_0x43a1f1(0xe4);const _0x447f82=document[_0x43a1f1(0xab)](_0x43a1f1(0x96)),_0x5c83e4=document[_0x43a1f1(0xab)](_0x43a1f1(0x96)),_0x537ee4=document[_0x43a1f1(0xab)](_0x43a1f1(0x96)),_0x2eed61=document['createElement'](_0x43a1f1(0xf6));_0x2eed61[_0x43a1f1(0xcb)]['display']='flex',_0x2eed61[_0x43a1f1(0xcb)][_0x43a1f1(0x82)]=_0x43a1f1(0xbd),_0x2eed61['style'][_0x43a1f1(0xc5)]=_0x43a1f1(0xc8),_0x2eed61['style'][_0x43a1f1(0xe5)]='center',_0x2eed61[_0x43a1f1(0xcb)][_0x43a1f1(0xd7)]=_0x43a1f1(0xdf),_0x447f82[_0x43a1f1(0x8b)]=_0x43a1f1(0xee),_0x447f82[_0x43a1f1(0xa8)]='0',_0x447f82[_0x43a1f1(0xeb)]='23',_0x447f82['placeholder']='HH',_0x447f82['style'][_0x43a1f1(0xdb)]=_0x43a1f1(0xc9),_0x447f82[_0x43a1f1(0xcb)][_0x43a1f1(0xe2)]='center',_0x447f82[_0x43a1f1(0xcb)]['marginBottom']='0',_0x5c83e4[_0x43a1f1(0x8b)]=_0x43a1f1(0xee),_0x5c83e4[_0x43a1f1(0xa8)]='0',_0x5c83e4['max']='59',_0x5c83e4[_0x43a1f1(0xbb)]='MM',_0x5c83e4[_0x43a1f1(0xcb)]['width']=_0x43a1f1(0xc9),_0x5c83e4[_0x43a1f1(0xcb)][_0x43a1f1(0xe2)]='center',_0x5c83e4[_0x43a1f1(0xcb)][_0x43a1f1(0xd7)]='0',_0x537ee4[_0x43a1f1(0x8b)]=_0x43a1f1(0xee),_0x537ee4[_0x43a1f1(0xa8)]='0',_0x537ee4[_0x43a1f1(0xeb)]='59',_0x537ee4[_0x43a1f1(0xbb)]='SS',_0x537ee4['style'][_0x43a1f1(0xdb)]=_0x43a1f1(0xc9),_0x537ee4[_0x43a1f1(0xcb)]['textAlign']='center',_0x537ee4[_0x43a1f1(0xcb)]['marginBottom']='0',_0x2eed61[_0x43a1f1(0x9f)](_0x447f82),_0x2eed61[_0x43a1f1(0x9f)](_0x5c83e4),_0x2eed61[_0x43a1f1(0x9f)](_0x537ee4);const _0xf54dd=document[_0x43a1f1(0xab)](_0x43a1f1(0x8f));_0xf54dd['innerText']=_0x43a1f1(0xa6),_0xf54dd[_0x43a1f1(0xcb)][_0x43a1f1(0xd7)]=_0x43a1f1(0xdf);const _0x37229f=document[_0x43a1f1(0xab)]('div');_0x37229f[_0x43a1f1(0xcb)]['display']=_0x43a1f1(0xb8),_0x37229f[_0x43a1f1(0xcb)][_0x43a1f1(0x82)]=_0x43a1f1(0xea),_0x37229f['style'][_0x43a1f1(0xc5)]=_0x43a1f1(0x85),_0x37229f[_0x43a1f1(0xcb)][_0x43a1f1(0xec)]=_0x43a1f1(0xb5),_0x4ed200['appendChild'](_0x44d25a),_0x4ed200['appendChild'](_0x2eed61),_0x4ed200[_0x43a1f1(0x9f)](_0xf54dd),_0x4ed200[_0x43a1f1(0x9f)](_0x37229f),_0xd5c789[_0x43a1f1(0x9f)](_0x3a79d0),_0xd5c789[_0x43a1f1(0x9f)](_0x4ed200),_0x49a54d[_0x43a1f1(0xc6)](_0xd5c789);const _0xfbb722=document['createElement']('button');_0xfbb722[_0x43a1f1(0xf4)]=_0x43a1f1(0xdd),_0xfbb722[_0x43a1f1(0xf5)]=_0x43a1f1(0xe9),_0xfbb722[_0x43a1f1(0xcb)][_0x43a1f1(0xbc)]=_0x43a1f1(0xb7),_0xfbb722[_0x43a1f1(0xcb)][_0x43a1f1(0xd0)]=_0x43a1f1(0xad),_0xfbb722['style'][_0x43a1f1(0xfa)]=_0x43a1f1(0xf0),_0xfbb722[_0x43a1f1(0xcb)][_0x43a1f1(0xa9)]=_0x43a1f1(0xff),_0xfbb722['style'][_0x43a1f1(0x87)]=_0x43a1f1(0x85),_0xfbb722[_0x43a1f1(0xcb)][_0x43a1f1(0xa1)]=_0x43a1f1(0xc4),_0xfbb722[_0x43a1f1(0xcb)][_0x43a1f1(0xf8)]='4px',_0xfbb722['style'][_0x43a1f1(0x88)]=_0x43a1f1(0xa2),_0xfbb722[_0x43a1f1(0xcb)][_0x43a1f1(0x9c)]=_0x43a1f1(0xaa),_0xfbb722['style']['bottom']=_0x43a1f1(0xaa);const _0x2bb3da=document[_0x43a1f1(0xf7)](_0x43a1f1(0xb6));_0x2bb3da&&(getComputedStyle(_0x2bb3da)['position']==='static'&&(_0x2bb3da[_0x43a1f1(0xcb)][_0x43a1f1(0x88)]=_0x43a1f1(0xd1)),_0x2bb3da[_0x43a1f1(0x9f)](_0xfbb722));_0xd5c789[_0x43a1f1(0xcb)][_0x43a1f1(0xa5)]=_0x43a1f1(0xcf),_0xfbb722['addEventListener']('click',function(){const _0x2527d8=_0x43a1f1;_0xd5c789[_0x2527d8(0xcb)][_0x2527d8(0xa5)]=_0xd5c789[_0x2527d8(0xcb)][_0x2527d8(0xa5)]==='none'?'':_0x2527d8(0xcf);});let _0x33d9ab=_0x3a79d0,_0x1b1f87=_0xd5c789,_0x3db68e=0x0,_0xcfb9d4=0x0,_0xd26ee1=![];_0x33d9ab['addEventListener'](_0x43a1f1(0xc0),function(_0x3823ca){const _0x260e98=_0x43a1f1;_0xd26ee1=!![],_0x3db68e=_0x1b1f87[_0x260e98(0x97)]-_0x3823ca['clientX'],_0xcfb9d4=_0x1b1f87[_0x260e98(0xcd)]-_0x3823ca[_0x260e98(0xae)],_0x3823ca[_0x260e98(0x90)]();},!![]),document[_0x43a1f1(0xa7)]('mouseup',function(){_0xd26ee1=![];},!![]),_0x33d9ab['addEventListener'](_0x43a1f1(0xb2),function(_0x41b514){const _0xf21f0=_0x43a1f1;_0xd26ee1&&(_0x1b1f87['style'][_0xf21f0(0x84)]=_0x41b514[_0xf21f0(0xaf)]+_0x3db68e+'px',_0x1b1f87[_0xf21f0(0xcb)][_0xf21f0(0xe6)]=_0x41b514[_0xf21f0(0xae)]+_0xcfb9d4+'px');},!![]);let _0x114349=[];_0xf54dd[_0x43a1f1(0xa7)](_0x43a1f1(0x8e),function(){const _0x26bf44=_0x43a1f1,_0x24e9b3=parseInt(_0x44d25a[_0x26bf44(0xb3)],0xa),_0x3bf4a8=parseInt(_0x447f82['value'],0xa),_0x18e6cd=parseInt(_0x5c83e4[_0x26bf44(0xb3)],0xa),_0x1c757d=parseInt(_0x537ee4[_0x26bf44(0xb3)],0xa);if(!_0x24e9b3||isNaN(_0x3bf4a8)||_0x3bf4a8<0x0||_0x3bf4a8>0x17||isNaN(_0x18e6cd)||_0x18e6cd<0x0||_0x18e6cd>0x3b||isNaN(_0x1c757d)||_0x1c757d<0x0||_0x1c757d>0x3b){alert(_0x26bf44(0xb4));return;}_0x2c396b(_0x24e9b3,_0x3bf4a8,_0x18e6cd,_0x1c757d);});function _0x2c396b(_0x4986e8,_0x5f48f0,_0xb8acb6,_0x6b48e){const _0x3f5830=_0x43a1f1,_0xd7283b=document[_0x3f5830(0xab)](_0x3f5830(0xf6));_0xd7283b[_0x3f5830(0xcb)][_0x3f5830(0xa5)]=_0x3f5830(0xb8),_0xd7283b[_0x3f5830(0xcb)]['flexDirection']='row',_0xd7283b[_0x3f5830(0xcb)][_0x3f5830(0xd2)]=_0x3f5830(0x9d),_0xd7283b['style'][_0x3f5830(0xc5)]=_0x3f5830(0xaa),_0xd7283b[_0x3f5830(0xcb)][_0x3f5830(0xfa)]='#f5f5dc',_0xd7283b[_0x3f5830(0xcb)][_0x3f5830(0xa9)]=_0x3f5830(0xc7),_0xd7283b[_0x3f5830(0xcb)][_0x3f5830(0xc3)]=_0x3f5830(0x83),_0xd7283b['style']['fontSize']=_0x3f5830(0xf9);const _0x98149f=document[_0x3f5830(0xab)](_0x3f5830(0x100));_0x98149f['innerText']=_0x3f5830(0xac)+_0x4986e8+'\x20@\x20'+_0x5f48f0[_0x3f5830(0xbe)]()[_0x3f5830(0xb9)](0x2,'0')+':'+_0xb8acb6['toString']()['padStart'](0x2,'0')+':'+_0x6b48e['toString']()['padStart'](0x2,'0');const _0x250949=document[_0x3f5830(0xab)]('span');_0x250949['innerText']=_0x3f5830(0x7d),_0x250949[_0x3f5830(0xcb)]['marginLeft']=_0x3f5830(0x85),_0x250949['style'][_0x3f5830(0xde)]=_0x3f5830(0xdc);const _0x27511c=document[_0x3f5830(0xab)](_0x3f5830(0x8f));_0x27511c[_0x3f5830(0xef)]=_0x3f5830(0xd9),_0x27511c[_0x3f5830(0xcb)]['backgroundColor']=_0x3f5830(0xbf),_0x27511c[_0x3f5830(0xcb)]['color']=_0x3f5830(0xf3),_0x27511c[_0x3f5830(0xcb)][_0x3f5830(0xa9)]='none',_0x27511c[_0x3f5830(0xcb)][_0x3f5830(0xa1)]=_0x3f5830(0xc4),_0x27511c[_0x3f5830(0xcb)]['padding']='2px\x208px',_0x27511c['style'][_0x3f5830(0xd0)]=_0x3f5830(0xa3),_0x27511c[_0x3f5830(0xcb)][_0x3f5830(0xba)]=_0x3f5830(0x85),_0xd7283b[_0x3f5830(0x9f)](_0x98149f),_0xd7283b['appendChild'](_0x250949),_0xd7283b['appendChild'](_0x27511c),_0x37229f['appendChild'](_0xd7283b);let _0x484e4f=setInterval(async function(){const _0x35fa72=_0x3f5830,_0x1a4d27=new Date();_0x1a4d27['getHours']()===_0x5f48f0&&_0x1a4d27['getMinutes']()===_0xb8acb6&&_0x1a4d27[_0x35fa72(0xd3)]()>=_0x6b48e-0x3&&_0x1a4d27[_0x35fa72(0xd3)]()<=_0x6b48e+0x2&&(_0x250949['innerText']=_0x35fa72(0x94)+_0x1a4d27[_0x35fa72(0xd3)]()+_0x35fa72(0xed),await _0x509252(_0x4986e8,_0x250949)),_0x1a4d27['getHours']()===_0x5f48f0&&_0x1a4d27[_0x35fa72(0x9a)]()===_0xb8acb6&&_0x1a4d27[_0x35fa72(0xd3)]()>_0x6b48e+0x2&&(_0x250949[_0x35fa72(0xef)]='Done!',clearInterval(_0x484e4f));},0xc8);_0x27511c[_0x3f5830(0xa7)]('click',function(){const _0x20dfed=_0x3f5830;clearInterval(_0x484e4f),_0x250949['innerText']='Cancelled',_0x27511c[_0x20dfed(0xa4)]=!![],_0xd7283b['style'][_0x20dfed(0xd5)]=_0x20dfed(0x80),_0xd7283b[_0x20dfed(0xa0)]();}),_0x114349['push']({'intervalId':_0x484e4f,'row':_0xd7283b});}async function _0x509252(_0x3e2d15,_0x2285dc){const _0x3ad9fb=_0x43a1f1;try{const _0x23ae37=uw['MM'][_0x3ad9fb(0x7e)]()[_0x3ad9fb(0x92)][0x0][_0x3ad9fb(0xd8)];let _0x14e91e=null;for(let _0x2eb853 of _0x23ae37){if(_0x2eb853[_0x3ad9fb(0xc1)][_0x3ad9fb(0x93)]===_0x3ad9fb(0xe1)){_0x14e91e=_0x2eb853;break;}}if(!_0x14e91e){_0x2285dc[_0x3ad9fb(0xef)]='No\x20Athena\x20city!';return;}let _0x19f62e=ITowns[_0x3ad9fb(0xfe)][_0x3ad9fb(0xc1)][_0x3ad9fb(0x9b)];if(_0x19f62e<0x82){_0x2285dc[_0x3ad9fb(0xef)]=_0x3ad9fb(0x91);return;}let _0xd20e83={'model_url':'CastedPowers','action_name':_0x3ad9fb(0x101),'arguments':{'power_id':_0x3ad9fb(0xb0),'target_id':_0x3e2d15,'town_id':_0x14e91e['attributes']['id'],'csrfToken':Game[_0x3ad9fb(0x99)]}};gpAjax[_0x3ad9fb(0xe3)](_0x3ad9fb(0xd4),'execute',_0xd20e83,!![]),_0x2285dc[_0x3ad9fb(0xef)]=_0x3ad9fb(0x86);}catch(_0x23838f){_0x2285dc['innerText']='Error:\x20'+_0x23838f['message'];}}})());function a0_0x4a25(_0x589cb1,_0x41ea2f){const _0xef67c8=a0_0xef67();return a0_0x4a25=function(_0x4a25bb,_0x146b11){_0x4a25bb=_0x4a25bb-0x7d;let _0x3dddbf=_0xef67c8[_0x4a25bb];return _0x3dddbf;},a0_0x4a25(_0x589cb1,_0x41ea2f);}function a0_0xef67(){const _0x16d63=['csrfToken','getMinutes','athena_favor','right','center','backgroundColor','appendChild','remove','cursor','absolute','12px','disabled','display','ADD\x20SCHEDULE','addEventListener','min','border','8px','createElement','City:\x20','18px','clientY','clientX','town_protection','textShadow','mousemove','value','Please\x20enter\x20a\x20valid\x20city\x20ID,\x20hour\x20(0-23),\x20minute\x20(0-59),\x20and\x20second\x20(0-59).','10px','.nui_main_menu\x20.bottom','10000','flex','padStart','marginLeft','placeholder','zIndex','row','toString','#e57373','mousedown','attributes','6518852OftdsG','padding','pointer','gap','append','1px\x20solid\x20#ccc','3px','34px','98CViTtT','style','bold','offsetTop','362288CSJKFB','none','fontSize','relative','alignItems','getSeconds','frontend_bridge','opacity','9999','marginBottom','models','Cancel','10956575PvhuGo','width','#333','<img\x20src=\x22https://raw.githubusercontent.com/georgeadono/grepolis_autoCityProtection/main/protection.png\x22\x20alt=\x22Protection\x22\x20style=\x22width:20px;height:20px;vertical-align:middle;\x22>','color','5px','1285ZXAcVn','athena','textAlign','ajaxPost','90px','justifyContent','top','documentElement','script','Show/Hide\x20Athena\x20Protection\x20Scheduler','column','max','marginTop','s...','number','innerText','gold','1px\x201px\x202px\x20#fff8dc','962157xVijZL','#fff','innerHTML','title','div','querySelector','margin','13px','background','minWidth','41826rjBGoC','move','player_gods','1px\x20solid\x20#bfa100','span','cast','className','Scheduled','getCollections','117fueARi','0.6','#f8de7e','flexDirection','3px\x205px','left','6px','Protection\x20cast!','borderRadius','position','24229ZTQEyX','27738238eDcTrL','type','Target\x20City\x20ID',')();','click','button','preventDefault','Not\x20enough\x20favor!','Town','god','Spamming\x20at\x20','1px\x20solid\x20black','input','offsetLeft','10BDcZZC'];a0_0xef67=function(){return _0x16d63;};return a0_0xef67();}
