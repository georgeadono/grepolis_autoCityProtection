// ==UserScript==
// @name         Prostasia
// @namespace    http://tampermonkey.net/
// @version      1.1
// @description  Schedule multiple Athena's City Protection spells on different cities at different times
// @author       NocteAvem
// @include      http://*.grepolis.com/game/*
// @include      https://*.grepolis.com/game/*
// @grant        none
// @icon         https://raw.githubusercontent.com/georgeadono/grepolis_autoCityProtection/main/protection.png
// @downloadURL  https://raw.githubusercontent.com/georgeadono/grepolis_autoCityProtection/refs/heads/main/prostasia.js
// @updateURL    https://raw.githubusercontent.com/georgeadono/grepolis_autoCityProtection/refs/heads/main/prostasia.js
// ==/UserScript==



function a0_0x5201(_0x3761ae,_0x27a6fa){const _0x114bba=a0_0x114b();return a0_0x5201=function(_0x5201a6,_0x27a2c1){_0x5201a6=_0x5201a6-0x1c4;let _0xa548ff=_0x114bba[_0x5201a6];return _0xa548ff;},a0_0x5201(_0x3761ae,_0x27a6fa);}function a0_0x114b(){const _0x68f53=['cursor','8px','className','getMinutes','csrfToken','marginLeft','toString','display','style','padStart','width','gap','player_gods','script','white','getSeconds','ajaxPost','background','pointer','2px\x208px','backgroundColor','titleDiv','minWidth','move','s...','span','Please\x20enter\x20a\x20valid\x20city\x20ID,\x20hour\x20(0-23),\x20minute\x20(0-59),\x20and\x20second\x20(0-59).','560px','padding','Spamming\x20at\x20','center','51469240zDeQmA','#fff','max','createElement','flex','addEventListener','placeholder','263955sjzZsS','6px','Cancel','border','zIndex','mousedown','698742MMiDym','textContent','20px','alignItems','Show/Hide\x20Athena\x20Protection\x20Scheduler','min','Not\x20enough\x20favor!','position','#f8de7e','317895Tfhtjp','bottom','town_protection','textAlign','number','3px\x205px','Protection\x20cast!','input','textShadow','body','No\x20Athena\x20city!','appendChild','push','#333','4px','remove','attributes','8wwayoS','3px','documentElement','antiquewhite','Town','5px','5695460kiIuVp','click','disabled','type','ADD\x20SCHEDULE','getHours','color','athena_favor','Target\x20City\x20ID','fontSize','6630785wQhVPA','20bVgvDO','Done!','marginTop','36NxTDQL','querySelector','row','7227387hlIkwW','div','column','models','athena','preventDefault','execute','offsetLeft','innerText','offsetTop','9999','flexDirection','left','10000','Cancelled','1px\x20solid\x20#ccc','none','value','1px\x20solid\x20black','borderRadius','button','1px\x201px\x202px\x20#fff8dc','cast','<img\x20src=\x22https://raw.githubusercontent.com/georgeadono/grepolis_autoCityProtection/main/protection.png\x22\x20alt=\x22Protection\x22\x20style=\x22width:20px;height:20px;vertical-align:middle;\x22>','Error:\x20','18px','gold','top','bold','fontWeight','marginBottom','margin','append','CastedPowers','opacity','1px\x20solid\x20#bfa100','absolute','clientY','City:\x20'];a0_0x114b=function(){return _0x68f53;};return a0_0x114b();}(function(_0x1d50ab,_0x3523be){const _0x348e8f=a0_0x5201,_0x3f6fae=_0x1d50ab();while(!![]){try{const _0x27a14f=-parseInt(_0x348e8f(0x236))/0x1+-parseInt(_0x348e8f(0x1dd))/0x2*(parseInt(_0x348e8f(0x230))/0x3)+-parseInt(_0x348e8f(0x1d2))/0x4+-parseInt(_0x348e8f(0x23f))/0x5*(-parseInt(_0x348e8f(0x1e0))/0x6)+parseInt(_0x348e8f(0x1dc))/0x7*(-parseInt(_0x348e8f(0x1cc))/0x8)+-parseInt(_0x348e8f(0x1e3))/0x9+parseInt(_0x348e8f(0x229))/0xa;if(_0x27a14f===_0x3523be)break;else _0x3f6fae['push'](_0x3f6fae['shift']());}catch(_0x34969d){_0x3f6fae['push'](_0x3f6fae['shift']());}}}(a0_0x114b,0xbd5db),function(_0x410723){const _0xc2d2a7=a0_0x5201;var _0x28a40d=document['createElement'](_0xc2d2a7(0x217));_0x28a40d[_0xc2d2a7(0x237)]='('+_0x410723[_0xc2d2a7(0x210)]()+')();',document[_0xc2d2a7(0x1ce)][_0xc2d2a7(0x1c6)](_0x28a40d);}(function(){const _0x50a050=a0_0x5201,_0x3a521d=document[_0x50a050(0x1c4)],_0x500180=document[_0x50a050(0x22c)](_0x50a050(0x1e4));_0x500180[_0x50a050(0x20c)]='startDiv',_0x500180[_0x50a050(0x212)][_0x50a050(0x1fe)]=_0x50a050(0x225),_0x500180['style'][_0x50a050(0x1ef)]=_0x50a050(0x238),_0x500180['style'][_0x50a050(0x23d)]=_0x50a050(0x207),_0x500180[_0x50a050(0x212)]['zIndex']=_0x50a050(0x1ed),_0x500180[_0x50a050(0x212)][_0x50a050(0x21e)]=_0x50a050(0x218),_0x500180['style']['border']=_0x50a050(0x1f5),_0x500180[_0x50a050(0x212)][_0x50a050(0x242)]=_0x50a050(0x228),_0x500180[_0x50a050(0x212)][_0x50a050(0x226)]='0',_0x500180[_0x50a050(0x212)][_0x50a050(0x220)]='260px';const _0x3a2e39=document['createElement'](_0x50a050(0x1e4));_0x3a2e39['className']=_0x50a050(0x21f),_0x3a2e39[_0x50a050(0x212)][_0x50a050(0x226)]='10px',_0x3a2e39['style'][_0x50a050(0x20a)]=_0x50a050(0x221),_0x3a2e39[_0x50a050(0x212)][_0x50a050(0x234)]='10',_0x3a2e39['style'][_0x50a050(0x21e)]=_0x50a050(0x23e),_0x3a2e39['style'][_0x50a050(0x1d8)]=_0x50a050(0x1c8),_0x3a2e39[_0x50a050(0x212)][_0x50a050(0x200)]=_0x50a050(0x1ff),_0x3a2e39[_0x50a050(0x212)][_0x50a050(0x247)]=_0x50a050(0x1f8),_0x3a2e39[_0x50a050(0x1eb)]='Athena\x20Protection\x20Scheduler';const _0x47b317=document[_0x50a050(0x22c)](_0x50a050(0x1e4));_0x47b317[_0x50a050(0x212)][_0x50a050(0x21e)]=_0x50a050(0x1cf),_0x47b317[_0x50a050(0x212)][_0x50a050(0x211)]=_0x50a050(0x22d),_0x47b317[_0x50a050(0x212)][_0x50a050(0x1ee)]=_0x50a050(0x1e5),_0x47b317['style'][_0x50a050(0x226)]='10px';const _0x35e4ae=document['createElement'](_0x50a050(0x246));_0x35e4ae[_0x50a050(0x1d5)]='number',_0x35e4ae[_0x50a050(0x23b)]='0',_0x35e4ae[_0x50a050(0x22f)]=_0x50a050(0x1da),_0x35e4ae['style'][_0x50a050(0x201)]=_0x50a050(0x1d1),_0x35e4ae['style'][_0x50a050(0x214)]='90px';const _0x3ab661=document['createElement'](_0x50a050(0x246)),_0x560b25=document[_0x50a050(0x22c)](_0x50a050(0x246)),_0x224f4a=document['createElement'](_0x50a050(0x246)),_0x58f111=document['createElement'](_0x50a050(0x1e4));_0x58f111[_0x50a050(0x212)][_0x50a050(0x211)]='flex',_0x58f111[_0x50a050(0x212)][_0x50a050(0x1ee)]=_0x50a050(0x1e2),_0x58f111[_0x50a050(0x212)]['gap']=_0x50a050(0x1cd),_0x58f111[_0x50a050(0x212)]['justifyContent']='center',_0x58f111['style'][_0x50a050(0x201)]=_0x50a050(0x1d1),_0x3ab661[_0x50a050(0x1d5)]=_0x50a050(0x243),_0x3ab661[_0x50a050(0x23b)]='0',_0x3ab661[_0x50a050(0x22b)]='23',_0x3ab661['placeholder']='HH',_0x3ab661[_0x50a050(0x212)][_0x50a050(0x214)]='34px',_0x3ab661['style']['textAlign']=_0x50a050(0x228),_0x3ab661['style'][_0x50a050(0x201)]='0',_0x560b25[_0x50a050(0x1d5)]=_0x50a050(0x243),_0x560b25['min']='0',_0x560b25['max']='59',_0x560b25[_0x50a050(0x22f)]='MM',_0x560b25[_0x50a050(0x212)]['width']='34px',_0x560b25[_0x50a050(0x212)][_0x50a050(0x242)]=_0x50a050(0x228),_0x560b25[_0x50a050(0x212)][_0x50a050(0x201)]='0',_0x224f4a[_0x50a050(0x1d5)]=_0x50a050(0x243),_0x224f4a[_0x50a050(0x23b)]='0',_0x224f4a[_0x50a050(0x22b)]='59',_0x224f4a[_0x50a050(0x22f)]='SS',_0x224f4a[_0x50a050(0x212)][_0x50a050(0x214)]='34px',_0x224f4a[_0x50a050(0x212)][_0x50a050(0x242)]=_0x50a050(0x228),_0x224f4a[_0x50a050(0x212)][_0x50a050(0x201)]='0',_0x58f111[_0x50a050(0x1c6)](_0x3ab661),_0x58f111['appendChild'](_0x560b25),_0x58f111[_0x50a050(0x1c6)](_0x224f4a);const _0x10c5a5=document[_0x50a050(0x22c)]('button');_0x10c5a5[_0x50a050(0x1eb)]=_0x50a050(0x1d6),_0x10c5a5['style'][_0x50a050(0x201)]='5px';const _0x3f7703=document[_0x50a050(0x22c)](_0x50a050(0x1e4));_0x3f7703['style'][_0x50a050(0x211)]=_0x50a050(0x22d),_0x3f7703[_0x50a050(0x212)][_0x50a050(0x1ee)]=_0x50a050(0x1e5),_0x3f7703[_0x50a050(0x212)][_0x50a050(0x215)]=_0x50a050(0x231),_0x3f7703[_0x50a050(0x212)][_0x50a050(0x1df)]='10px',_0x47b317['appendChild'](_0x35e4ae),_0x47b317[_0x50a050(0x1c6)](_0x58f111),_0x47b317[_0x50a050(0x1c6)](_0x10c5a5),_0x47b317['appendChild'](_0x3f7703),_0x500180[_0x50a050(0x1c6)](_0x3a2e39),_0x500180['appendChild'](_0x47b317),_0x3a521d[_0x50a050(0x203)](_0x500180);const _0x581882=document[_0x50a050(0x22c)](_0x50a050(0x1f7));_0x581882['innerHTML']=_0x50a050(0x1fa),_0x581882['title']=_0x50a050(0x23a),_0x581882[_0x50a050(0x212)][_0x50a050(0x234)]=_0x50a050(0x1f0),_0x581882[_0x50a050(0x212)][_0x50a050(0x1db)]=_0x50a050(0x1fc),_0x581882[_0x50a050(0x212)]['background']=_0x50a050(0x1fd),_0x581882[_0x50a050(0x212)][_0x50a050(0x233)]=_0x50a050(0x206),_0x581882[_0x50a050(0x212)][_0x50a050(0x1f6)]=_0x50a050(0x231),_0x581882[_0x50a050(0x212)][_0x50a050(0x20a)]=_0x50a050(0x21c),_0x581882[_0x50a050(0x212)][_0x50a050(0x202)]=_0x50a050(0x1c9),_0x581882['style'][_0x50a050(0x23d)]=_0x50a050(0x207),_0x581882[_0x50a050(0x212)]['right']=_0x50a050(0x20b),_0x581882[_0x50a050(0x212)][_0x50a050(0x240)]='8px';const _0x2d959a=document[_0x50a050(0x1e1)]('.nui_main_menu\x20.bottom');_0x2d959a&&(getComputedStyle(_0x2d959a)[_0x50a050(0x23d)]==='static'&&(_0x2d959a[_0x50a050(0x212)][_0x50a050(0x23d)]='relative'),_0x2d959a[_0x50a050(0x1c6)](_0x581882));_0x500180[_0x50a050(0x212)][_0x50a050(0x211)]=_0x50a050(0x1f3),_0x581882[_0x50a050(0x22e)](_0x50a050(0x1d3),function(){const _0x2a9c8a=_0x50a050;_0x500180['style'][_0x2a9c8a(0x211)]=_0x500180[_0x2a9c8a(0x212)][_0x2a9c8a(0x211)]===_0x2a9c8a(0x1f3)?'':_0x2a9c8a(0x1f3);});let _0x224150=_0x3a2e39,_0x581382=_0x500180,_0x154a8c=0x0,_0x286a29=0x0,_0x4271cb=![];_0x224150[_0x50a050(0x22e)](_0x50a050(0x235),function(_0x46500e){const _0x2ef1b7=_0x50a050;_0x4271cb=!![],_0x154a8c=_0x581382[_0x2ef1b7(0x1ea)]-_0x46500e['clientX'],_0x286a29=_0x581382[_0x2ef1b7(0x1ec)]-_0x46500e[_0x2ef1b7(0x208)],_0x46500e[_0x2ef1b7(0x1e8)]();},!![]),document['addEventListener']('mouseup',function(){_0x4271cb=![];},!![]),_0x224150[_0x50a050(0x22e)]('mousemove',function(_0x12931b){const _0x2aee7b=_0x50a050;_0x4271cb&&(_0x581382[_0x2aee7b(0x212)][_0x2aee7b(0x1ef)]=_0x12931b['clientX']+_0x154a8c+'px',_0x581382['style'][_0x2aee7b(0x1fe)]=_0x12931b[_0x2aee7b(0x208)]+_0x286a29+'px');},!![]);let _0x19e5b9=[];_0x10c5a5[_0x50a050(0x22e)]('click',function(){const _0x331f3d=_0x50a050,_0x1f41d1=parseInt(_0x35e4ae[_0x331f3d(0x1f4)],0xa),_0x1b93ac=parseInt(_0x3ab661[_0x331f3d(0x1f4)],0xa),_0x358914=parseInt(_0x560b25[_0x331f3d(0x1f4)],0xa),_0x54c314=parseInt(_0x224f4a[_0x331f3d(0x1f4)],0xa);if(!_0x1f41d1||isNaN(_0x1b93ac)||_0x1b93ac<0x0||_0x1b93ac>0x17||isNaN(_0x358914)||_0x358914<0x0||_0x358914>0x3b||isNaN(_0x54c314)||_0x54c314<0x0||_0x54c314>0x3b){alert(_0x331f3d(0x224));return;}_0x3ec0c9(_0x1f41d1,_0x1b93ac,_0x358914,_0x54c314);});function _0x3ec0c9(_0x12f529,_0x39c626,_0xffa7d6,_0x5a36cc){const _0x3e0267=_0x50a050,_0x2096f1=document['createElement'](_0x3e0267(0x1e4));_0x2096f1[_0x3e0267(0x212)][_0x3e0267(0x211)]=_0x3e0267(0x22d),_0x2096f1[_0x3e0267(0x212)][_0x3e0267(0x1ee)]=_0x3e0267(0x1e2),_0x2096f1[_0x3e0267(0x212)][_0x3e0267(0x239)]=_0x3e0267(0x228),_0x2096f1[_0x3e0267(0x212)]['gap']=_0x3e0267(0x20b),_0x2096f1[_0x3e0267(0x212)][_0x3e0267(0x21b)]='#f5f5dc',_0x2096f1[_0x3e0267(0x212)][_0x3e0267(0x233)]=_0x3e0267(0x1f2),_0x2096f1[_0x3e0267(0x212)][_0x3e0267(0x226)]=_0x3e0267(0x244),_0x2096f1[_0x3e0267(0x212)][_0x3e0267(0x1db)]='13px';const _0x7b84d4=document['createElement'](_0x3e0267(0x223));_0x7b84d4[_0x3e0267(0x1eb)]=_0x3e0267(0x209)+_0x12f529+'\x20@\x20'+_0x39c626['toString']()[_0x3e0267(0x213)](0x2,'0')+':'+_0xffa7d6['toString']()[_0x3e0267(0x213)](0x2,'0')+':'+_0x5a36cc[_0x3e0267(0x210)]()[_0x3e0267(0x213)](0x2,'0');const _0x39b54a=document[_0x3e0267(0x22c)]('span');_0x39b54a['innerText']='Scheduled',_0x39b54a[_0x3e0267(0x212)][_0x3e0267(0x20f)]=_0x3e0267(0x231),_0x39b54a[_0x3e0267(0x212)][_0x3e0267(0x1d8)]=_0x3e0267(0x1c8);const _0x3fa078=document[_0x3e0267(0x22c)](_0x3e0267(0x1f7));_0x3fa078[_0x3e0267(0x1eb)]=_0x3e0267(0x232),_0x3fa078[_0x3e0267(0x212)]['backgroundColor']='#e57373',_0x3fa078[_0x3e0267(0x212)][_0x3e0267(0x1d8)]=_0x3e0267(0x22a),_0x3fa078[_0x3e0267(0x212)]['border']='none',_0x3fa078[_0x3e0267(0x212)][_0x3e0267(0x20a)]=_0x3e0267(0x21c),_0x3fa078[_0x3e0267(0x212)][_0x3e0267(0x226)]=_0x3e0267(0x21d),_0x3fa078[_0x3e0267(0x212)]['fontSize']='12px',_0x3fa078[_0x3e0267(0x212)]['marginLeft']=_0x3e0267(0x231),_0x2096f1[_0x3e0267(0x1c6)](_0x7b84d4),_0x2096f1[_0x3e0267(0x1c6)](_0x39b54a),_0x2096f1[_0x3e0267(0x1c6)](_0x3fa078),_0x3f7703['appendChild'](_0x2096f1);let _0x315e86=setInterval(async function(){const _0x18db26=_0x3e0267,_0x5f2559=new Date();_0x5f2559[_0x18db26(0x1d7)]()===_0x39c626&&_0x5f2559[_0x18db26(0x20d)]()===_0xffa7d6&&_0x5f2559[_0x18db26(0x219)]()>=_0x5a36cc-0x3&&_0x5f2559[_0x18db26(0x219)]()<=_0x5a36cc+0x2&&(_0x39b54a[_0x18db26(0x1eb)]=_0x18db26(0x227)+_0x5f2559[_0x18db26(0x219)]()+_0x18db26(0x222),await _0x3ff85(_0x12f529,_0x39b54a)),_0x5f2559[_0x18db26(0x1d7)]()===_0x39c626&&_0x5f2559[_0x18db26(0x20d)]()===_0xffa7d6&&_0x5f2559[_0x18db26(0x219)]()>_0x5a36cc+0x2&&(_0x39b54a['innerText']=_0x18db26(0x1de),clearInterval(_0x315e86));},0xc8);_0x3fa078[_0x3e0267(0x22e)]('click',function(){const _0x536574=_0x3e0267;clearInterval(_0x315e86),_0x39b54a['innerText']=_0x536574(0x1f1),_0x3fa078[_0x536574(0x1d4)]=!![],_0x2096f1['style'][_0x536574(0x205)]='0.6',_0x2096f1[_0x536574(0x1ca)]();}),_0x19e5b9[_0x3e0267(0x1c7)]({'intervalId':_0x315e86,'row':_0x2096f1});}async function _0x3ff85(_0x351e30,_0x28a5b6){const _0x255bc0=_0x50a050;try{const _0x24dabb=uw['MM']['getCollections']()[_0x255bc0(0x1d0)][0x0][_0x255bc0(0x1e6)];let _0x446d6e=null;for(let _0x908ad5 of _0x24dabb){if(_0x908ad5[_0x255bc0(0x1cb)]['god']===_0x255bc0(0x1e7)){_0x446d6e=_0x908ad5;break;}}if(!_0x446d6e){_0x28a5b6[_0x255bc0(0x1eb)]=_0x255bc0(0x1c5);return;}let _0x5c0f80=ITowns[_0x255bc0(0x216)][_0x255bc0(0x1cb)][_0x255bc0(0x1d9)];if(_0x5c0f80<0x82){_0x28a5b6[_0x255bc0(0x1eb)]=_0x255bc0(0x23c);return;}let _0x2bf0eb={'model_url':_0x255bc0(0x204),'action_name':_0x255bc0(0x1f9),'arguments':{'power_id':_0x255bc0(0x241),'target_id':_0x351e30,'town_id':_0x446d6e['attributes']['id'],'csrfToken':Game[_0x255bc0(0x20e)]}};gpAjax[_0x255bc0(0x21a)]('frontend_bridge',_0x255bc0(0x1e9),_0x2bf0eb,!![]),_0x28a5b6[_0x255bc0(0x1eb)]=_0x255bc0(0x245);}catch(_0x5b395b){_0x28a5b6[_0x255bc0(0x1eb)]=_0x255bc0(0x1fb)+_0x5b395b['message'];}}})());
